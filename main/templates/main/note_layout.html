{% extends 'main/layout.html' %}
{% block body %}
{% block container_start %}{% endblock %}
<table>
    {% block note_title %}
    {% endblock %}
    <tr>
        <th><h2>1: Write what you know</h2></th>
        <td>
            {% if note.iterations_one %}
            {% for iteration in note.iterations_one %}
            <div class="table-data" data-iteration={{forloop.counter}} data-which=1>
                <h4>Iteration: {{ forloop.counter }}</h4>
                <div class="data">
                    <p>{{ iteration }}</p>
                    {% if 'edit' in request.path %}
                    <button type="button" class="edit-iteration">Edit</button>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
            {% else %}
            <p>No iterations so far.</p>
            {% endif %}
            {% block iterations_one %}
            {% endblock %}
        </td>
    </tr>
    <tr>
        <th><h2>1: Links</h2></th>
        <td id="links-data">
            {% load layout_tags %}
            {% if note.links|length > 0 %}
            {% for iteration in note.links %}
            <div class="table-data">
                <h4>Links for iteration: {{ iteration }}</h4>
                {% for link in note.links|get_value:iteration %}
                <div class="data" data-forwhich={{link|get_value:0}} data-iteration={{forloop.counter}} data-which=0>
                    <!-- Links for iteration {iteration here} -->
                    <a href="{{ link|get_value:2 }}" target="_blank">{{ link|get_value:1 }}</a>
                    {% if 'edit' in request.path %}
                    <button type="button" class="edit-iteration">Edit</button>
                    {% endif %}
                </div>
                {% endfor %}
            </div>
            {% endfor %}
            {% else %}
            <p>No links</p>
            {% endif %}
            {% block form_links %}
            {% endblock %}
        </td>
    </tr>
    <tr>
        <th><h2>2: Identify gaps in explanation</h2></th>
        <td>
            {% if note.iterations_two %}
            {% for iteration in note.iterations_two %}
            <div class="table-data" data-iteration={{forloop.counter}} data-which=2>
                <div class="data" data-iteration={{forloop.counter}}>
                    <h4>Iteration: {{ forloop.counter }}</h4>
                    <p>{{ iteration }}</p>
                </div>
                {% if 'edit' in request.path %}
                <button type="button" class="edit-iteration">Edit</button>
                {% endif %}
            </div>
            {% endfor %}
            {% else %}
            <p>No iterations so far</p>
            {% endif %}
            {% block step_two_iterations %}
            {% endblock %}
        </td>
    </tr>
    <tr>
        <th>3: Final Statement</th>
        {% if note.step_three|length %}
        <td>
            <p>{{ note.step_three }}</p>
        </td>
        {% else %}
        <td>
            <p>No step three stated.</p>
        </td>
        {% endif %}
    </tr>
    {% block rest %}
    {% endblock %}
</table>
{% block container_end %}{% endblock %}
{% endblock %}