{% extends 'main/layout.html' %}
{% block body %}
{% block container_start %}{% endblock %}
<table>
    {% block note_title %}
    {% endblock %}
    <tr>
        <th><h2>1: Write what you know</h2></th>
        <td>
            {% if note.iterations_one %}
            {% for iteration in note.iterations_one %}
            <div class="table-data">
                <h4>Iteration: {{ forloop.counter }}</h4>
                <div class="data">
                    <p>{{ iteration }}</p>
                    {% if 'edit' in request.path %}
                    <button type="button" class="edit-iteration" data-iteration={{forloop.counter}} data-which=1>Edit</button>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
            {% else %}
            <p>No iterations so far.</p>
            {% endif %}
            {% block iterations_one %}
            {% endblock %}
        </td>
    </tr>
    <tr>
        <th><h2>1: Links</h2></th>
        <td>
            {% if note.links %}
            {% for iteration in note.links %}
            <div class="table-data">
                <h4>Iteration: {{ forloop.counter }}</h4>
                <div class="data">
                    <!-- Links for iteration {iteration here} -->
                    <a href="{{ iteration }}" target="_blank">{{ iteration }}</a>
                    {% if 'edit' in request.path %}
                    <button type="button" class="edit-iteration" data-iteration={{forloop.counter}} data-which=0>Edit</button>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
            {% else %}
            <p>No links</p>
            {% endif %}
            {% block form_links %}
            {% endblock %}
        </td>
    </tr>
    <tr>
        <th><h2>2: Identify gaps in explanation</h2></th>
        <td>
            {% if note.iterations_two %}
            {% for iteration in note.iterations_two %}
            <div class="table-data">
                <div class="data">
                    <h4>Iteration: {{ forloop.counter }}</h4>
                    <p>{{ iteration }}</p>
                </div>
                {% if 'edit' in request.path %}
                <button type="button" class="edit-iteration" data-iteration={{forloop.counter}} data-which=2>Edit</button>
                {% endif %}
            </div>
            {% endfor %}
            {% else %}
            <p>No iterations so far</p>
            {% endif %}
            {% block step_two_iterations %}
            {% endblock %}
        </td>
    </tr>
    <tr>
        <th>3: Final Statement</th>
        {% if note.step_three|length %}
        <td>{{ note.step_three }}</td>
        {% else %}
        <p>No step three stated.</p>
        {% endif %}
    </tr>
    {% block rest %}
    {% endblock %}
</table>
{% block container_end %}{% endblock %}
{% endblock %}